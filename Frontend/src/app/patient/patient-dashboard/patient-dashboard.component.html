<!-- dashboard.component.html -->
<h1>Welcome, {{username}}</h1>

<!-- <div class="section">
  <h2>Available Doctors</h2>
  <ul>
    <li *ngFor="let doctor of doctorsList">{{ doctor.name }} - {{ doctor.specialty }}</li>
  </ul>
</div> -->

<div class="section">
  <h2>Make Appointment</h2>
  <label for="appointment">Select a doctor and slot:</label>
  <select id="appointment" [(ngModel)]="selectedAppointment" (change)="storeID($event)">
    <option value="" disabled>Select a doctor and slot</option>
    <ng-container *ngFor="let doctor of doctorsList">
      <ng-container *ngFor="let slot of doctor.Slots">
        <option [ngValue]="{ doctorId: doctor.doctorID, slotId: slot.slotID }">
         Doctor  {{ doctor.name }}  -  Slot {{ slot.slotID }}  -  Time: {{ slot.time | date:'short' }}
        </option>
      </ng-container>
    </ng-container>
  </select>

  <button (click)="makeAppointment()">Make Appointment</button>
</div>

  <h2>My Reservations</h2>
<div class="forTable">
  <table>
    <thead>
      <tr>
        <th>Doctor Name</th>
        <th>Time (Date)</th>
        <th>Time (Hours)</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let reservation of myReservations">
        <td>{{ reservation.Slot.Doctor.name }}</td>
        <td>{{ reservation.Slot.time | date:'mediumDate' }}</td>
        <td>{{ reservation.Slot.time | date:'shortTime' }}</td>
        <td>
          <button >Edit</button>
          <button (click)="cancelAppointment(reservation.appointmentID)">Cancel</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>


<!-- <div class="section">
  <h2>Cancel Appointment</h2>
  <select [(ngModel)]="selectedReservation" required>
    <option value="" disabled>Select a reservation to cancel</option>
    <option *ngFor="let reservation of myReservations" [value]="reservation.id">
      {{ reservation.slot.time }} - {{ reservation.doctor.name }}
    </option>
  </select>
  <button (click)="cancelAppointment(selectedReservation)">Cancel Appointment</button>
</div>

<div class="section">
  <h2>Update Slot</h2>
  <select [(ngModel)]="selectedReservationForSlotUpdate" required>
    <option value="" disabled>Select a reservation to update</option>
    <option *ngFor="let reservation of myReservations" [value]="reservation.id">
      {{ reservation.slot.time }} - {{ reservation.doctor.name }}
    </option>
  </select>
  <select [(ngModel)]="newSlotID" required>
    <option value="" disabled>Select a new slot</option>
    <option *ngFor="let slot of availableSlots" [value]="slot.id">{{ slot.time }}</option>
  </select>
  <button (click)="updateSlot()">Update Slot</button>
</div>

<div class="section">
  <h2>Update Doctor</h2>
  <select [(ngModel)]="selectedReservationForDoctorUpdate" required>
    <option value="" disabled>Select a reservation to update</option>
    <option *ngFor="let reservation of myReservations" [value]="reservation.id">
      {{ reservation.slot.time }} - {{ reservation.doctor.name }}
    </option>
  </select>
  <select [(ngModel)]="newDoctorID" required>
    <option value="" disabled>Select a new doctor</option>
    <option *ngFor="let doctor of doctorsList" [value]="doctor.id">{{ doctor.name }} - {{ doctor.specialty }}</option>
  </select>
  <button (click)="updateDoctor()">Update Doctor</button>
</div> -->
